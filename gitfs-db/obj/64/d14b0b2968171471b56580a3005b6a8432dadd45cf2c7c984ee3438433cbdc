{"type":"text","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","  <meta charset=\"UTF-8\">","  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","  <title>Encantis IDE</title>","  <style>","    * { margin: 0; padding: 0; box-sizing: border-box; }","    ","    :root {","      --bg-dark: #1e1e2e;","      --bg-darker: #181825;","      --bg-lighter: #313244;","      --border: #45475a;","      --text: #cdd6f4;","      --text-dim: #6c7086;","      --accent: #89b4fa;","      --accent2: #f5c2e7;","      --green: #a6e3a1;","      --red: #f38ba8;","      --yellow: #f9e2af;","      --purple: #cba6f7;","      --orange: #fab387;","      --cyan: #94e2d5;","    }","    ","    body {","      font-family: system-ui, -apple-system, sans-serif;","      background: var(--bg-dark);","      color: var(--text);","      height: 100vh;","      display: flex;","      flex-direction: column;","      overflow: hidden;","    }","    ","    /* Header */","    header {","      background: var(--bg-darker);","      padding: 0.5rem 1rem;","      border-bottom: 1px solid var(--border);","      display: flex;","      align-items: center;","      gap: 1rem;","    }","    ","    .logo {","      font-size: 1.2rem;","      font-weight: bold;","      color: var(--accent);","      display: flex;","      align-items: center;","      gap: 0.5rem;","    }","    ","    .logo-icon {","      font-size: 1.5rem;","    }","    ","    .toolbar {","      display: flex;","      gap: 0.5rem;","      margin-left: auto;","    }","    ","    .toolbar-btn {","      background: var(--bg-lighter);","      border: 1px solid var(--border);","      color: var(--text);","      padding: 0.4rem 0.8rem;","      border-radius: 4px;","      cursor: pointer;","      font-size: 0.8rem;","      display: flex;","      align-items: center;","      gap: 0.3rem;","    }","    ","    .toolbar-btn:hover {","      background: var(--border);","    }","    ","    .toolbar-btn.primary {","      background: var(--accent);","      color: var(--bg-darker);","      border-color: var(--accent);","    }","    ","    .toolbar-btn.primary:hover {","      opacity: 0.9;","    }","    ","    /* Main Layout */","    .main-container {","      flex: 1;","      display: flex;","      overflow: hidden;","    }","    ","    /* Sidebar */","    .sidebar {","      width: 250px;","      background: var(--bg-darker);","      border-right: 1px solid var(--border);","      display: flex;","      flex-direction: column;","    }","    ","    .sidebar-header {","      padding: 0.75rem 1rem;","      font-size: 0.75rem;","      text-transform: uppercase;","      color: var(--text-dim);","      border-bottom: 1px solid var(--border);","      display: flex;","      justify-content: space-between;","      align-items: center;","    }","    ","    .sidebar-header button {","      background: none;","      border: none;","      color: var(--text-dim);","      cursor: pointer;","      font-size: 1rem;","      padding: 0.2rem;","    }","    ","    .sidebar-header button:hover {","      color: var(--text);","    }","    ","    .file-tree {","      flex: 1;","      overflow-y: auto;","      padding: 0.5rem 0;","    }","    ","    .file-item {","      padding: 0.4rem 1rem;","      cursor: pointer;","      display: flex;","      align-items: center;","      gap: 0.5rem;","      font-size: 0.85rem;","    }","    ","    .file-item:hover {","      background: var(--bg-lighter);","    }","    ","    .file-item.active {","      background: var(--bg-lighter);","      border-left: 2px solid var(--accent);","    }","    ","    .file-item.folder {","      color: var(--yellow);","    }","    ","    .file-item.file {","      color: var(--text);","    }","    ","    .file-icon {","      font-size: 1rem;","    }","    ","    .file-name {","      flex: 1;","      overflow: hidden;","      text-overflow: ellipsis;","      white-space: nowrap;","    }","    ","    .file-actions {","      display: none;","      gap: 0.25rem;","    }","    ","    .file-item:hover .file-actions {","      display: flex;","    }","    ","    .file-action {","      background: none;","      border: none;","      color: var(--text-dim);","      cursor: pointer;","      font-size: 0.8rem;","      padding: 0.1rem 0.3rem;","    }","    ","    .file-action:hover {","      color: var(--red);","    }","    ","    /* Editor Area */","    .editor-area {","      flex: 1;","      display: flex;","      flex-direction: column;","      min-width: 0;","    }","    ","    /* Tabs */","    .tabs {","      background: var(--bg-darker);","      display: flex;","      border-bottom: 1px solid var(--border);","      overflow-x: auto;","    }","    ","    .tab {","      padding: 0.6rem 1rem;","      background: transparent;","      border: none;","      color: var(--text-dim);","      cursor: pointer;","      font-size: 0.85rem;","      display: flex;","      align-items: center;","      gap: 0.5rem;","      border-bottom: 2px solid transparent;","      white-space: nowrap;","    }","    ","    .tab:hover {","      background: var(--bg-lighter);","    }","    ","    .tab.active {","      color: var(--text);","      border-bottom-color: var(--accent);","      background: var(--bg-dark);","    }","    ","    .tab-close {","      font-size: 0.9rem;","      opacity: 0.5;","      padding: 0.1rem 0.2rem;","      border-radius: 3px;","    }","    ","    .tab-close:hover {","      opacity: 1;","      background: var(--red);","      color: white;","    }","    ","    .tab-modified {","      width: 8px;","      height: 8px;","      background: var(--yellow);","      border-radius: 50%;","    }","    ","    /* Editor */","    .editor-container {","      flex: 1;","      display: flex;","      overflow: hidden;","    }","    ","    .line-numbers {","      background: var(--bg-darker);","      color: var(--text-dim);","      padding: 1rem 0.5rem;","      text-align: right;","      font-family: 'Monaco', 'Menlo', monospace;","      font-size: 14px;","      line-height: 1.6;","      user-select: none;","      border-right: 1px solid var(--border);","      min-width: 50px;","    }","    ","    .editor-wrapper {","      flex: 1;","      position: relative;","      overflow: hidden;","    }","    ","    .editor {","      position: absolute;","      top: 0;","      left: 0;","      right: 0;","      bottom: 0;","      background: transparent;","      color: transparent;","      caret-color: var(--text);","      border: none;","      padding: 1rem;","      font-family: 'Monaco', 'Menlo', monospace;","      font-size: 14px;","      line-height: 1.6;","      resize: none;","      overflow: auto;","      white-space: pre;","      tab-size: 2;","      z-index: 1;","    }","    .editor:focus {","      outline: none;","    }","    ","    .syntax-highlight {","      position: absolute;","      top: 0;","      left: 0;","      right: 0;","      bottom: 0;","      padding: 1rem;","      font-family: 'Monaco', 'Menlo', monospace;","      font-size: 14px;","      line-height: 1.6;","      pointer-events: none;","      white-space: pre;","      overflow: hidden;","      color: transparent;","      color: var(--text);","    }","    ","    /* Syntax highlighting colors */","    .hl-comment { color: var(--text-dim); font-style: italic; }","    .hl-string { color: var(--green); }","    .hl-keyword { color: var(--purple); font-weight: 500; }","    .hl-type { color: var(--yellow); }","    .hl-constant { color: var(--orange); }","    .hl-number { color: var(--orange); }","    .hl-operator { color: var(--cyan); }","    .hl-punctuation { color: var(--text-dim); }","    .hl-function { color: var(--accent); }","    }","    ","    /* Output Panel */","    .output-panel {","      height: 200px;","      background: var(--bg-darker);","      border-top: 1px solid var(--border);","      display: flex;","      flex-direction: column;","    }","    ","    .output-tabs {","      display: flex;","      border-bottom: 1px solid var(--border);","    }","    ","    .output-tab {","      padding: 0.5rem 1rem;","      background: transparent;","      border: none;","      color: var(--text-dim);","      cursor: pointer;","      font-size: 0.8rem;","      border-bottom: 2px solid transparent;","    }","    ","    .output-tab.active {","      color: var(--text);","      border-bottom-color: var(--accent);","    }","    ","    .output-content {","      flex: 1;","      overflow: auto;","      padding: 0.75rem 1rem;","      font-family: 'Monaco', 'Menlo', monospace;","      font-size: 13px;","      line-height: 1.5;","    }","    ","    .output-content.wat {","      color: var(--cyan);","    }","    ","    .output-content.error {","      color: var(--red);","    }","    ","    .output-content.console {","      color: var(--green);","    }","    ","    /* Empty state */","    .empty-state {","      flex: 1;","      display: flex;","      flex-direction: column;","      align-items: center;","      justify-content: center;","      color: var(--text-dim);","    }","    ","    .empty-state-icon {","      font-size: 4rem;","      margin-bottom: 1rem;","      opacity: 0.5;","    }","    ","    /* Modal */","    .modal-overlay {","      position: fixed;","      top: 0;","      left: 0;","      right: 0;","      bottom: 0;","      background: rgba(0,0,0,0.5);","      display: flex;","      align-items: center;","      justify-content: center;","      z-index: 1000;","    }","    ","    .modal {","      background: var(--bg-darker);","      border: 1px solid var(--border);","      border-radius: 8px;","      padding: 1.5rem;","      min-width: 300px;","    }","    ","    .modal h3 {","      margin-bottom: 1rem;","      color: var(--accent);","    }","    ","    .modal input {","      width: 100%;","      padding: 0.5rem;","      background: var(--bg-dark);","      border: 1px solid var(--border);","      border-radius: 4px;","      color: var(--text);","      margin-bottom: 1rem;","    }","    ","    .modal input:focus {","      outline: none;","      border-color: var(--accent);","    }","    ","    .modal-buttons {","      display: flex;","      justify-content: flex-end;","      gap: 0.5rem;","    }","    ","    .hidden { display: none !important; }","  </style>","</head>","<body>","  <header>","    <div class=\"logo\">","      <span class=\"logo-icon\">‚ú®</span>","      <span>Encantis IDE</span>","    </div>","    <div class=\"toolbar\">","      <button class=\"toolbar-btn\" onclick=\"newFile()\">+ New File</button>","      <button class=\"toolbar-btn primary\" onclick=\"compile()\">‚ñ∂ Compile</button>","      <button class=\"toolbar-btn primary\" onclick=\"run()\">‚ö° Run</button>","    </div>","  </header>","  ","  <div class=\"main-container\">","    <div class=\"sidebar\">","      <div class=\"sidebar-header\">","        <span>Explorer</span>","        <button onclick=\"newFile()\" title=\"New File\">+</button>","      </div>","      <div class=\"file-tree\" id=\"file-tree\"></div>","    </div>","    ","    <div class=\"editor-area\">","      <div class=\"tabs\" id=\"tabs\"></div>","      <div class=\"editor-container\" id=\"editor-container\">","        <div class=\"empty-state\" id=\"empty-state\">","          <div class=\"empty-state-icon\">üìù</div>","          <p>Create or select a file to start editing</p>","        </div>","        <div class=\"line-numbers hidden\" id=\"line-numbers\"></div>","        <div class=\"editor-wrapper hidden\" id=\"editor-wrapper\">","          <div class=\"syntax-highlight\" id=\"syntax-highlight\"></div>","          <textarea class=\"editor\" id=\"editor\" spellcheck=\"false\"></textarea>","        </div>","      </div>","      ","      <div class=\"output-panel\">","        <div class=\"output-tabs\">","          <button class=\"output-tab active\" onclick=\"showOutput('wat')\">WAT Output</button>","          <button class=\"output-tab\" onclick=\"showOutput('console')\">Console</button>","          <button class=\"output-tab\" onclick=\"showOutput('errors')\">Errors</button>","        </div>","        <div class=\"output-content wat\" id=\"output-content\">","          <span style=\"color: var(--text-dim)\">-- Compile to see WAT output --</span>","        </div>","      </div>","    </div>","  </div>","  ","  <div class=\"modal-overlay hidden\" id=\"new-file-modal\">","    <div class=\"modal\">","      <h3>New File</h3>","      <input type=\"text\" id=\"new-file-name\" placeholder=\"filename.ents\" autofocus>","      <div class=\"modal-buttons\">","        <button class=\"toolbar-btn\" onclick=\"closeModal()\">Cancel</button>","        <button class=\"toolbar-btn primary\" onclick=\"createFile()\">Create</button>","      </div>","    </div>","  </div>","","","  <script src=\"https://cdn.jsdelivr.net/npm/wabt@1.0.32/index.js\"></script>","  <script src=\"compiler.js\"></script>","  <script src=\"compiler.js\"></script>","  <script>","    // State","    const files = new Map();","    let activeFile = null;","    let openTabs = [];","    let currentOutput = 'wat';","    let outputs = { wat: '', console: '', errors: '' };","    ","    // Sample files","    const sampleFiles = {","      'main.ents': `-- Main program","-- Encantis: A language that compiles to WebAssembly","","func add(a:i32, b:i32) -> i32 {","  a + b","}","","func factorial(n:i32) -> i32 {","  if n <= 1 {","    1","  } else {","    n * factorial(n - 1)","  }","}","","export func main() -> i32 {","  local x:i32 = add(10, 20)","  local y:i32 = factorial(5)","  x + y","}`,","      'math.ents': `-- Math utilities","","func abs(n:i32) -> i32 {","  if n < 0 { -n } else { n }","}","","func max(a:i32, b:i32) -> i32 {","  if a > b { a } else { b }","}","","func min(a:i32, b:i32) -> i32 {","  if a < b { a } else { b }","}","","func clamp(val:i32, lo:i32, hi:i32) -> i32 {","  max(lo, min(hi, val))","}`,","      'strings.ents': `-- String handling (using slices)","","-- String length from null-terminated slice","func strlen(s:[u8/0]) -> i32 {","  local len:i32 = 0","  while s[len] != 0 {","    len = len + 1","  }","  len","}","","-- Compare two strings","func strcmp(a:[u8], b:[u8]) -> i32 {","  local i:i32 = 0","  while i < a.len && i < b.len {","    if a[i] != b[i] {","      a[i] - b[i]","    }","    i = i + 1","  }","  a.len - b.len","}`","    };","    ","    // Initialize with sample files","    function init() {","      for (const [name, content] of Object.entries(sampleFiles)) {","        files.set(name, { content, modified: false });","      }","      renderFileTree();","      openFile('main.ents');","    }","    ","    // File operations","    function newFile() {","      document.getElementById('new-file-modal').classList.remove('hidden');","      const input = document.getElementById('new-file-name');","      input.value = '';","      input.focus();","    }","    ","    function closeModal() {","      document.getElementById('new-file-modal').classList.add('hidden');","    }","    ","    function createFile() {","      const name = document.getElementById('new-file-name').value.trim();","      if (!name) return;","      ","      const fileName = name.endsWith('.ents') ? name : name + '.ents';","      if (files.has(fileName)) {","        alert('File already exists');","        return;","      }","      ","      files.set(fileName, { content: `-- ${fileName}\\n\\n`, modified: false });","      renderFileTree();","      openFile(fileName);","      closeModal();","    }","    ","    function deleteFile(name, e) {","      e.stopPropagation();","      if (!confirm(`Delete ${name}?`)) return;","      ","      files.delete(name);","      openTabs = openTabs.filter(t => t !== name);","      if (activeFile === name) {","        activeFile = openTabs[0] || null;","      }","      renderFileTree();","      renderTabs();","      renderEditor();","    }","    ","    function openFile(name) {","      if (!files.has(name)) return;","      ","      // Save current file first","      if (activeFile) {","        saveCurrentFile();","      }","      ","      activeFile = name;","      if (!openTabs.includes(name)) {","        openTabs.push(name);","      }","      ","      renderFileTree();","      renderTabs();","      renderEditor();","    }","    ","    function closeTab(name, e) {","      e.stopPropagation();","      openTabs = openTabs.filter(t => t !== name);","      if (activeFile === name) {","        activeFile = openTabs[openTabs.length - 1] || null;","      }","      renderTabs();","      renderEditor();","    }","    ","    function saveCurrentFile() {","      if (!activeFile) return;","      const editor = document.getElementById('editor');","      const file = files.get(activeFile);","      if (file) {","        file.content = editor.value;","      }","    }","    ","    // Rendering","    function renderFileTree() {","      const tree = document.getElementById('file-tree');","      tree.innerHTML = Array.from(files.entries())","        .sort((a, b) => a[0].localeCompare(b[0]))","        .map(([name, file]) => `","          <div class=\"file-item file ${name === activeFile ? 'active' : ''}\" onclick=\"openFile('${name}')\">","            <span class=\"file-icon\">üìÑ</span>","            <span class=\"file-name\">${name}</span>","            ${file.modified ? '<span class=\"tab-modified\"></span>' : ''}","            <div class=\"file-actions\">","              <button class=\"file-action\" onclick=\"deleteFile('${name}', event)\" title=\"Delete\">√ó</button>","            </div>","          </div>","        `).join('');","    }","    ","    function renderTabs() {","      const tabs = document.getElementById('tabs');","      tabs.innerHTML = openTabs.map(name => {","        const file = files.get(name);","        return `","          <button class=\"tab ${name === activeFile ? 'active' : ''}\" onclick=\"openFile('${name}')\">","            ${file?.modified ? '<span class=\"tab-modified\"></span>' : ''}","            ${name}","            <span class=\"tab-close\" onclick=\"closeTab('${name}', event)\">√ó</span>","          </button>","        `;","      }).join('');","    }","    ","    function renderEditor() {","      const emptyState = document.getElementById('empty-state');","      const lineNumbers = document.getElementById('line-numbers');","      const editorWrapper = document.getElementById('editor-wrapper');","      const editor = document.getElementById('editor');","      ","      if (!activeFile) {","        emptyState.classList.remove('hidden');","        lineNumbers.classList.add('hidden');","        editorWrapper.classList.add('hidden');","        return;","      }","      ","      emptyState.classList.add('hidden');","      lineNumbers.classList.remove('hidden');","      editorWrapper.classList.remove('hidden');","      ","      const file = files.get(activeFile);","      editor.value = file?.content || '';","      updateLineNumbers();","      updateSyntaxHighlight();","    }","    ","    function updateLineNumbers() {","      const editor = document.getElementById('editor');","      const lineNumbers = document.getElementById('line-numbers');","      const lines = editor.value.split('\\n').length;","      lineNumbers.innerHTML = Array.from({ length: lines }, (_, i) => i + 1).join('<br>');","    }","    ","    // Syntax highlighting - Encantis tokenizer","    function updateSyntaxHighlight() {","      const editor = document.getElementById('editor');","      const highlightEl = document.getElementById('syntax-highlight');","      ","      const code = editor.value;","      highlightEl.innerHTML = highlightCode(code);","    }","    ","    function highlightCode(code) {","      // Token patterns for Encantis","      const patterns = [","        // Comments (highest priority)","        { regex: /--[^\\n]*/g, class: 'comment' },","        // Strings","        { regex: /\"(?:[^\"\\\\]|\\\\.)*\"/g, class: 'string' },","        // Keywords","        { regex: /\\b(func|local|if|else|elif|while|do|block|loop|end|break|continue|export|import|memory|return)\\b/g, class: 'keyword' },","        // Types","        { regex: /\\b(i32|u32|i64|u64|f32|f64|i8|i16|u8|u16|bool|void)\\b/g, class: 'type' },","        // Built-in constants","        { regex: /\\b(true|false|nil)\\b/g, class: 'constant' },","        // Numbers (hex, binary, decimal, float)","        { regex: /\\b0x[0-9a-fA-F_]+\\b/g, class: 'number' },","        { regex: /\\b0b[01_]+\\b/g, class: 'number' },","        { regex: /\\b0o[0-7_]+\\b/g, class: 'number' },","        { regex: /\\b\\d+(\\.\\d+)?([eE][+-]?\\d+)?\\b/g, class: 'number' },","        // Operators","        { regex: /->|=>|<=|>=|==|!=|&&|\\|\\||<<|>>|<<<|>>>|\\+\\+|--/g, class: 'operator' },","        // Punctuation","        { regex: /[{}()\\[\\]:;,\\.]/g, class: 'punctuation' },","        // Function names (word followed by open paren)","        { regex: /\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()/g, class: 'function' },","      ];","      ","      // Create spans for each token","      let result = escapeHtml(code);","      ","      // Apply patterns in order of priority","      const tokens = [];","      ","      for (const { regex, class: className } of patterns) {","        let match;","        regex.lastIndex = 0;","        while ((match = regex.exec(code)) !== null) {","          tokens.push({","            start: match.index,","            end: match.index + match[0].length,","            text: match[0],","            class: className","          });","        }","      }","      ","      // Sort by position, then by length (longer matches win)","      tokens.sort((a, b) => a.start - b.start || b.end - a.end);","      ","      // Remove overlapping tokens (keep first/longest)","      const filtered = [];","      let lastEnd = -1;","      for (const token of tokens) {","        if (token.start >= lastEnd) {","          filtered.push(token);","          lastEnd = token.end;","        }","      }","      ","      // Build highlighted output","      let output = '';","      let pos = 0;","      ","      for (const token of filtered) {","        // Add unhighlighted text before token","        if (token.start > pos) {","          output += escapeHtml(code.slice(pos, token.start));","        }","        // Add highlighted token","        output += `<span class=\"hl-${token.class}\">${escapeHtml(token.text)}</span>`;","        pos = token.end;","      }","      ","      // Add remaining text","      if (pos < code.length) {","        output += escapeHtml(code.slice(pos));","      }","      ","      return output;","    }","    ","    function escapeHtml(text) {","      return text","        .replace(/&/g, '&amp;')","        .replace(/</g, '&lt;')","        .replace(/>/g, '&gt;');","    }","    ","    ","    // Output panel","    // Output panel","    function showOutput(type) {","      currentOutput = type;","      const tabs = document.querySelectorAll('.output-tab');","      tabs.forEach(t => t.classList.remove('active'));","      // Find the correct tab by index: wat=0, console=1, errors=2","      const tabIndex = type === 'wat' ? 0 : type === 'console' ? 1 : 2;","      if (tabs[tabIndex]) tabs[tabIndex].classList.add('active');","      ","      const content = document.getElementById('output-content');","      content.className = 'output-content ' + type;","      content.textContent = outputs[type] || '';","      if (!outputs[type]) {","        content.innerHTML = `<span style=\"color: var(--text-dim)\">-- No ${type} output --</span>`;","      }","    }","    ","    // EncantisCompiler loaded from external compiler.js","    ","    ","    // Compilation - uses EncantisCompiler","    function compile() {","      saveCurrentFile();","      if (!activeFile) {","        outputs.errors = 'No file selected';","        showOutput('errors');","        return;","      }","      ","      const file = files.get(activeFile);","      const compiler = new EncantisCompiler(file.content, activeFile);","      const result = compiler.compile();","      ","      if (result.errors.length > 0) {","        outputs.errors = result.errors.join('\\n');","        outputs.wat = '';","        showOutput('errors');","        document.querySelectorAll('.output-tab').forEach(t => t.classList.remove('active'));","        document.querySelectorAll('.output-tab')[2].classList.add('active');","      } else {","        outputs.wat = result.wat;","        outputs.errors = '';","        outputs.console = `Compiled ${activeFile} successfully!`;","        ","        document.querySelectorAll('.output-tab').forEach(t => t.classList.remove('active'));","        document.querySelector('.output-tab').classList.add('active');","        const content = document.getElementById('output-content');","        content.className = 'output-content wat';","        content.textContent = outputs.wat;","      }","    }","    // Run - compile WAT to WASM and execute","    let wabtModule = null;","    ","    async function initWabt() {","      if (!wabtModule) {","        outputs.console = '> Loading WABT...';","        showOutput('console');","        wabtModule = await WabtModule();","      }","      return wabtModule;","    }","    ","    async function run() {","      compile();","      if (!outputs.wat || outputs.errors) {","        return;","      }","      ","      try {","        const wabt = await initWabt();","        outputs.console = '> Compiling WAT to WASM...\\n';","        showOutput('console');","        ","        // Parse WAT to WASM binary","        const wasmModule = wabt.parseWat('module.wat', outputs.wat);","        const { buffer } = wasmModule.toBinary({});","        wasmModule.destroy();","        ","        // Instantiate WASM","        outputs.console += '> Instantiating WASM module...\\n';","        showOutput('console');","        const compiled = await WebAssembly.compile(buffer);","        const instance = await WebAssembly.instantiate(compiled, {});","        ","        // Find and call exported functions","        const exports = Object.keys(instance.exports).filter(k => typeof instance.exports[k] === 'function');","        outputs.console += `> Found exports: ${exports.join(', ')}\\n\\n`;","        ","        // Call main if it exists","        if (instance.exports.main) {","          outputs.console += '> Calling main()...\\n';","          const result = instance.exports.main();","          outputs.console += `> Result: ${result}\\n`;","        } else if (exports.length > 0) {","          // Call first exported function","          const fn = exports[0];","          outputs.console += `> Calling ${fn}()...\\n`;","          const result = instance.exports[fn]();","          outputs.console += `> Result: ${result}\\n`;","        }","        ","        outputs.console += '\\n> Execution complete!';","        showOutput('console');","        document.querySelectorAll('.output-tab').forEach(t => t.classList.remove('active'));","        document.querySelectorAll('.output-tab')[1].classList.add('active');","        ","      } catch (e) {","        outputs.errors = `WASM Error: ${e.message}`;","        outputs.console += `\\n> Error: ${e.message}`;","        showOutput('errors');","        document.querySelectorAll('.output-tab').forEach(t => t.classList.remove('active'));","        document.querySelectorAll('.output-tab')[2].classList.add('active');","      }","    }","    ","    // Editor events","    document.getElementById('editor').addEventListener('input', () => {","      const file = files.get(activeFile);","      if (file) {","        file.modified = true;","        renderFileTree();","        renderTabs();","      }","      updateLineNumbers();","      updateSyntaxHighlight();","    });","    ","    document.getElementById('editor').addEventListener('scroll', () => {","      const editor = document.getElementById('editor');","      const lineNumbers = document.getElementById('line-numbers');","      const syntaxHighlight = document.getElementById('syntax-highlight');","      lineNumbers.scrollTop = editor.scrollTop;","      syntaxHighlight.scrollTop = editor.scrollTop;","      syntaxHighlight.scrollLeft = editor.scrollLeft;","    });","    ","    document.getElementById('editor').addEventListener('keydown', (e) => {","      // Tab key inserts spaces","      if (e.key === 'Tab') {","        e.preventDefault();","        const editor = e.target;","        const start = editor.selectionStart;","        const end = editor.selectionEnd;","        editor.value = editor.value.substring(0, start) + '  ' + editor.value.substring(end);","        editor.selectionStart = editor.selectionEnd = start + 2;","        editor.dispatchEvent(new Event('input'));","      }","      ","      // Ctrl+S to save","      if (e.ctrlKey && e.key === 's') {","        e.preventDefault();","        saveCurrentFile();","        const file = files.get(activeFile);","        if (file) file.modified = false;","        renderFileTree();","        renderTabs();","      }","    });","    ","    // Modal events","    document.getElementById('new-file-name').addEventListener('keydown', (e) => {","      if (e.key === 'Enter') createFile();","      if (e.key === 'Escape') closeModal();","    });","    ","    // Initialize","    init();","  </script>","</body>","</html>",""]}