{"type":"text","lines":["// Jot Playground App","const jsonEditor = document.getElementById('json-editor');","const jotEditor = document.getElementById('jot-editor');","const jsonError = document.getElementById('json-error');","const jotError = document.getElementById('jot-error');","const prettyPrint = document.getElementById('pretty-print');","const formatBtn = document.getElementById('format-json');","const loadSampleBtn = document.getElementById('load-sample');","","// Stats elements","const jsonBytes = document.getElementById('json-bytes');","const jsonChars = document.getElementById('json-chars');","const jotBytes = document.getElementById('jot-bytes');","const jotChars = document.getElementById('jot-chars');","const savings = document.getElementById('savings');","","// Chart elements","const jsonBarFill = document.getElementById('json-bar-fill');","const jotBarFill = document.getElementById('jot-bar-fill');","const jsonBarValue = document.getElementById('json-bar-value');","const jotBarValue = document.getElementById('jot-bar-value');","","let updating = false;","","// Sample data","const sampleData = {","  users: [","    { id: 1, name: \"Alice\", email: \"alice@example.com\", active: true },","    { id: 2, name: \"Bob\", email: \"bob@example.com\", active: false },","    { id: 3, name: \"Charlie\", email: \"charlie@example.com\", active: true }","  ],","  settings: {","    theme: {","      mode: \"dark\",","      primary: \"#6366f1\"","    }","  },","  version: \"1.0.0\"","};","","function getByteLength(str) {","  return new TextEncoder().encode(str).length;","}","","function updateStats(jsonStr, jotStr) {","  const jsonB = getByteLength(jsonStr);","  const jotB = getByteLength(jotStr);","  ","  jsonBytes.textContent = `${jsonB} bytes`;","  jsonChars.textContent = `${jsonStr.length} chars`;","  jotBytes.textContent = `${jotB} bytes`;","  jotChars.textContent = `${jotStr.length} chars`;","  ","  if (jsonB > 0) {","    const pct = ((jsonB - jotB) / jsonB * 100).toFixed(1);","    if (jotB < jsonB) {","      savings.textContent = `-${pct}%`;","      savings.classList.remove('negative');","    } else if (jotB > jsonB) {","      savings.textContent = `+${Math.abs(pct)}%`;","      savings.classList.add('negative');","    } else {","      savings.textContent = '0%';","      savings.classList.remove('negative');","    }","  } else {","    savings.textContent = '-';","  }","  ","  // Update bar chart","  const maxBytes = Math.max(jsonB, jotB, 1);","  jsonBarFill.style.width = `${(jsonB / maxBytes) * 100}%`;","  jotBarFill.style.width = `${(jotB / maxBytes) * 100}%`;","  jsonBarValue.textContent = `${jsonB} bytes`;","  jotBarValue.textContent = `${jotB} bytes`;","}","","function showError(element, message) {","  element.textContent = message;","  element.classList.add('visible');","}","","function hideError(element) {","  element.textContent = '';","  element.classList.remove('visible');","}","","function jsonToJot() {","  if (updating) return;","  updating = true;","  ","  const jsonStr = jsonEditor.value;","  hideError(jsonError);","  ","  if (!jsonStr.trim()) {","    jotEditor.value = '';","    updateStats('', '');","    updating = false;","    return;","  }","  ","  try {","    const data = JSON.parse(jsonStr);","    const jotStr = Jot.stringify(data, { pretty: prettyPrint.checked });","    jotEditor.value = jotStr;","    hideError(jotError);","    ","    // Use compact JSON for fair comparison","    const compactJson = JSON.stringify(data);","    updateStats(compactJson, jotStr);","  } catch (e) {","    showError(jsonError, e.message);","  }","  ","  updating = false;","}","","function jotToJson() {","  if (updating) return;","  updating = true;","  ","  const jotStr = jotEditor.value;","  hideError(jotError);","  ","  if (!jotStr.trim()) {","    jsonEditor.value = '';","    updateStats('', '');","    updating = false;","    return;","  }","  ","  try {","    const data = Jot.parse(jotStr);","    const jsonStr = JSON.stringify(data, null, 2);","    jsonEditor.value = jsonStr;","    hideError(jsonError);","    ","    // Use compact JSON for fair comparison","    const compactJson = JSON.stringify(data);","    updateStats(compactJson, jotStr);","  } catch (e) {","    showError(jotError, e.message);","  }","  ","  updating = false;","}","","function formatJson() {","  try {","    const data = JSON.parse(jsonEditor.value);","    jsonEditor.value = JSON.stringify(data, null, 2);","    hideError(jsonError);","  } catch (e) {","    showError(jsonError, e.message);","  }","}","","function loadSample() {","  jsonEditor.value = JSON.stringify(sampleData, null, 2);","  hideError(jsonError);","  jsonToJot();","}","","// Event listeners","jsonEditor.addEventListener('input', jsonToJot);","jotEditor.addEventListener('input', jotToJson);","prettyPrint.addEventListener('change', jsonToJot);","formatBtn.addEventListener('click', formatJson);","loadSampleBtn.addEventListener('click', loadSample);","","// Load sample on start","loadSample();"]}