{"type":"text","lines":["(function() {","  const match = location.pathname.match(/^\\/(refs\\/[^/]+\\/[^/]+)/);","  if (!match) return;","  const ref = match[1];","  let currentHash = null;","","  function connect() {","    const es = new EventSource('/sse/' + ref);","    es.onmessage = (e) => {","      const data = JSON.parse(e.data);","      if (currentHash && currentHash !== data.hash) {","        location.reload();","      }","      currentHash = data.hash;","    };","    es.onerror = () => {","      es.close();","      setTimeout(connect, 1000);","    };","  }","  connect();","})();"]}