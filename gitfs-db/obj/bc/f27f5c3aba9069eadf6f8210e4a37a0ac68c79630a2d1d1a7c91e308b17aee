{"type":"text","lines":["// Demo Runner - Self-healing demo mode for Git-FS apps","// Include this script in each app to enable demo mode support","","(function() {","  'use strict';","  ","  const isDemo = sessionStorage.getItem('demoMode') === 'true';","  if (!isDemo) return;","  ","  const appConfig = JSON.parse(sessionStorage.getItem('currentApp') || 'null');","  if (!appConfig) {","    // No app config, go home","    goHome('No app config');","    return;","  }","  ","  console.log('[Demo] Running demo for:', appConfig.name);","  ","  // Helper functions","  function wait(ms) {","    return new Promise(r => setTimeout(r, ms));","  }","  ","  function click(selector) {","    const el = document.querySelector(selector);","    if (el) {","      console.log('[Demo] Clicking:', selector);","      el.click();","      return true;","    }","    console.log('[Demo] Element not found:', selector);","    return false;","  }","  ","  function type(selector, text) {","    const el = document.querySelector(selector);","    if (el) {","      console.log('[Demo] Typing in:', selector);","      el.value = text;","      el.dispatchEvent(new Event('input', { bubbles: true }));","      return true;","    }","    return false;","  }","  ","  function goHome(reason) {","    console.log('[Demo] Returning home:', reason);","    window.location.href = '../';","  }","  ","  function checkHealth() {","    // Basic health check - make sure we're on a real page","    return document.body && document.body.innerHTML.length > 100;","  }","  ","  // App-specific demo scripts","  const demoScripts = {","    'encantis-ide/': async () => {","      await wait(1000);","      // Click on main.ents file","      click('.file-item');","      await wait(1500);","      // Click compile","      click('button[onclick=\"compile()\"]');","      await wait(2500);","      // Click run","      click('button[onclick=\"run()\"]');","      await wait(3000);","    },","    ","    'd2-playground/': async () => {","      await wait(1000);","      // Click through tabs","      click('.tab:nth-child(1)');","      await wait(1500);","      click('.tab:nth-child(2)');","      await wait(1500);","      click('.tab:nth-child(3)');","      await wait(2000);","    },","    ","    'n2-playground/': async () => {","      await wait(1000);","      click('.tab:nth-child(1)');","      await wait(1500);","      click('.tab:nth-child(2)');","      await wait(1500);","      click('.tab:nth-child(3)');","      await wait(2000);","    },","    ","    'jsonito-playground/': async () => {","      await wait(1000);","      click('.tab:nth-child(1)');","      await wait(1500);","      click('.tab:nth-child(2)');","      await wait(1500);","      click('.tab:nth-child(3)');","      await wait(1500);","    },","    ","    'nibs-playground/': async () => {","      await wait(1000);","      click('.tab:nth-child(1)');","      await wait(1500);","      click('.tab:nth-child(2)');","      await wait(1500);","      click('.tab:nth-child(3)');","      await wait(1500);","    },","    ","    'jot-playground/': async () => {","      // Just watch the live conversion","      await wait(4000);","    }","  };","  ","  // Run the demo","  async function runDemo() {","    try {","      // Wait for page to fully load","      await wait(500);","      ","      if (!checkHealth()) {","        goHome('Health check failed');","        return;","      }","      ","      const script = demoScripts[appConfig.url];","      if (script) {","        await script();","      } else {","        console.log('[Demo] No script for:', appConfig.url);","        await wait(3000);","      }","      ","      // Demo complete, go home","      goHome('Demo complete');","      ","    } catch (error) {","      console.error('[Demo] Error:', error);","      goHome('Error: ' + error.message);","    }","  }","  ","  // Start demo after page load","  if (document.readyState === 'complete') {","    runDemo();","  } else {","    window.addEventListener('load', runDemo);","  }","})();",""]}