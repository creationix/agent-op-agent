before_filesystem[17]:
  - src: "^/_analytics/script\\.js$"
    dest: "https://cdn.analytics.io/v1/script.js"
  - src: ^/_analytics/events$
    dest: "https://events.analytics.io/v1/collect?key=abc123&env=prod"
  - src: "^/(?:_metrics|perf)/(script\\.js)$"
    dest: "https://cdn.metrics.io/v1/$1"
  - src: "^(?:/((?:[^/]+?)(?:/(?:[^/]+?))*))/$"
    headers:
      Location: /$1
    status: 308
    continue: true
  - src: ^/_internal/trace$
    dest: /404
    status: 404
    continue: true
  - src: ^/404/?$
    status: 404
    continue: true
    missing[1]{type,key}:
      header,x-prerender
  - src: ^/500$
    status: 500
    continue: true
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,a1b2c3d4e5f6
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/submit.ts#submitForm
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,f6e5d4c3b2a1
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/auth.ts#loginUser
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,1a2b3c4d5e6f
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/auth.ts#logoutUser
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,6f5e4d3c2b1a
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/data.ts#fetchItems
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,abcdef123456
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/data.ts#updateItem
  - src: ^/(.*)$
    has[1]{type,key,value}:
      header,x-action,654321fedcba
    transforms[1]:
      - type: request.headers
        op: append
        target:
          key: x-action-name
        args: app/api/data.ts#deleteItem
  - src: "^/(?<path>.+?)(?:/)?$"
    dest: /$path.segments/$segmentPath.segment.rsc
    has[3]{type,key,value}:
      header,rsc,"1"
      header,prefetch,"1"
      header,segment-prefetch,/(?<segmentPath>.+)
    continue: true
    override: true
  - src: ^/?$
    dest: /index.segments/$segmentPath.segment.rsc
    has[3]{type,key,value}:
      header,rsc,"1"
      header,prefetch,"1"
      header,segment-prefetch,/(?<segmentPath>.+)
    continue: true
    override: true
  - src: ^/?$
    has[1]{type,key,value}:
      header,rsc,"1"
    dest: /index.rsc
    headers:
      vary: "rsc, state-tree, prefetch, segment-prefetch"
    continue: true
    override: true
  - src: "^/((?!.+\\.rsc).+?)(?:/)?$"
    has[1]{type,key,value}:
      header,rsc,"1"
    dest: /$1.rsc
    headers:
      vary: "rsc, state-tree, prefetch, segment-prefetch"
    continue: true
    override: true
filesystem[3]:
  - src: "^/index(\\.action|\\.rsc)$"
    dest: /
    continue: true
  - src: "^/\\.rsc$"
    dest: /index.rsc
    check: true
  - src: "^/(.+)/\\.rsc$"
    dest: /$1.rsc
    check: true
resource[1]{src,status}:
  ^/.*$,404
miss[1]:
  - src: ^/_static/.+$
    status: 404
    check: true
    dest: /_static/not-found.txt
    headers:
      "content-type": text/plain; charset=utf-8
rewrite[6]{src,dest,check,override}:
  "^/blog/(?<slug>[^/]+?)\\.segments/blog/\\$slug(?<seg>/__PAGE__\\.segment\\.rsc|\\.segment\\.rsc)$","/blog/[slug].segments/blog/$slug$seg?slug=$slug",true,true
  "^/blog/(?<slug>[^/]+?)(?<rsc>\\.rsc|\\.segments/.+\\.segment\\.rsc)$","/blog/[slug]$rsc?slug=$slug",true,true
  "^/blog/(?<slug>[^/]+?)(?:/)?$","/blog/[slug]?slug=$slug",true,true
  "^/items/(?<id>[^/]+?)\\.segments/items/\\$id(?<seg>/__PAGE__\\.segment\\.rsc|\\.segment\\.rsc)$","/items/[id].segments/items/$id$seg?id=$id",true,true
  "^/items/(?<id>[^/]+?)(?<rsc>\\.rsc|\\.segments/.+\\.segment\\.rsc)$","/items/[id]$rsc?id=$id",true,true
  "^/items/(?<id>[^/]+?)(?:/)?$","/items/[id]?id=$id",true,true
hit[3]:
  - src: "^/_static/(?:[^/]+/pages|chunks|runtime|css|media)/.+$"
    headers:
      "cache-control": "public,max-age=31536000,immutable"
    continue: true
    important: true
  - src: "^/index(?:/)?$"
    headers:
      "x-matched-path": /
    continue: true
    important: true
  - src: "^/((?!index$).*?)(?:/)?$"
    headers:
      "x-matched-path": /$1
    continue: true
    important: true
error[2]{src,dest,status}:
  ^/.*$,/404,404
  ^/.*$,/500,500