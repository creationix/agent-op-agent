{
  apiVersion: "2.0",
  kind: Deployment,
  metadata: {
    name: web-server,
    namespace: production,
    labels: {
      app: web,
      tier: frontend,
      environment: production
    }
  },
  spec: {
    replicas: 3,
    selector.matchLabels: {
      app: web,
      tier: frontend
    },
    template: {
      metadata.labels: {
        app: web,
        tier: frontend,
        version: 1.2.3
      },
      spec.containers: 2x[
        {
          name: nginx,
          image: "nginx:1.21",
          ports: 2m[
           :containerPort, protocol
            80, TCP
            443, TCP
          ],
          resources: {
            requests: {
              cpu: 100m,
              memory: 128Mi
            },
            limits: {
              cpu: 500m,
              memory: 512Mi
            }
          },
          env: 3m[
           :name, value
            NODE_ENV, production
            LOG_LEVEL, info
            MAX_CONNECTIONS, "1000"
          ]
        },
        {
          name: sidecar,
          image: "envoy:1.20",
          ports: [{
            containerPort: 8080,
            protocol: TCP
          }],
          resources: {
            requests: {
              cpu: 50m,
              memory: 64Mi
            },
            limits: {
              cpu: 200m,
              memory: 256Mi
            }
          }
        }
      ]
    }
  }
}